#!/bin/sh

set -eu


remote_branch="$(git rev-parse --abbrev-ref --symbolic-full-name @{u})"
remote_rev="$(git rev-parse "$remote_branch")"
local_rev="$(git rev-parse HEAD)"

if [ "$remote_rev" = "$local_rev" ]; then
    echo "Cannot undo pushed commits"
    exit 1
fi

git reset HEAD^
